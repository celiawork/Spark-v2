<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>spark-front documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">spark-front documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../">spark-front documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./modules.html" >
                            <span class="fa fa-archive"></span>
                            <span>Modules</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            ></span>
                        </a>
                        <ul class="links collapse in"
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/AppModule.html" >AppModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/HomeModule.html" >HomeModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/LoginModule.html" >LoginModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/LoginRoutingModule.html" >LoginRoutingModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/MapModule.html" >MapModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/RegisterModule.html" >RegisterModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/RegisterRoutingModule.html" >RegisterRoutingModule</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-cogs"></span>
                            <span>Components</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-components-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-components-links"
                            >
                                <li class="link">
                                    <a href="../components/AddFavoritesComponent.html" >AddFavoritesComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/AddressBarComponent.html" >AddressBarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/AppComponent.html" >AppComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/BoderAdminComponent.html" >BoderAdminComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/BoderUserComponent.html" >BoderUserComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/BottomPopupComponent.html" >BottomPopupComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/BottomPopupInteractiveComponent.html" >BottomPopupInteractiveComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/FavoriteMessageComponent.html" >FavoriteMessageComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/HomeComponent.html" >HomeComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ItineraryComponent.html" >ItineraryComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoginComponent.html" >LoginComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MapComponent.html" >MapComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MessageComponent.html" >MessageComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MessageStandardComponent.html" >MessageStandardComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/NavbarComponent.html" >NavbarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ParkingComponent.html" >ParkingComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ParkingsComponent.html" >ParkingsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PopupErrorMessageComponent.html" >PopupErrorMessageComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ProfilComponent.html" >ProfilComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/RegisterComponent.html" >RegisterComponent</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-classes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/GpsNavSimu.html" >GpsNavSimu</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/ParkingClass.html" >ParkingClass</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-injectables-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="../injectables/AuthGuard.html" >AuthGuard</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/AuthInterceptor.html" >AuthInterceptor</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/AuthService.html" >AuthService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/EmissionService.html" >EmissionService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/EnergyService.html" >EnergyService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/GainService.html" >GainService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ItineraryDisplayService.html" >ItineraryDisplayService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ItineraryService.html" >ItineraryService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/MapService.html"  class="active" >MapService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ParkingDisplayService.html" >ParkingDisplayService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ParkingService.html" >ParkingService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/TokenStorageService.html" >TokenStorageService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/UserService.html" >UserService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/VehicleService.html" >VehicleService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ZoneService.html" >ZoneService</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-interfaces-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="../interfaces/Energy.html" >Energy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/NavGps.html" >NavGps</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Parking.html" >Parking</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/User.html" >User</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Vehicle.html" >Vehicle</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Zone.html" >Zone</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                        <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../">spark-front documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./modules.html" >
                                   <span class="fa fa-archive"></span>
                                   <span>Modules</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#modules-links"
                                   ></span>
                               </a>
                               <ul class="links collapse in"
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/AppModule.html" >AppModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/HomeModule.html" >HomeModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/LoginModule.html" >LoginModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/LoginRoutingModule.html" >LoginRoutingModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/MapModule.html" >MapModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/RegisterModule.html" >RegisterModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/RegisterRoutingModule.html" >RegisterRoutingModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-cogs"></span>
                                   <span>Components</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#components-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="components-links"
                   >
                                       <li class="link">
                                           <a href="../components/AddFavoritesComponent.html" >AddFavoritesComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/AddressBarComponent.html" >AddressBarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/AppComponent.html" >AppComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/BoderAdminComponent.html" >BoderAdminComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/BoderUserComponent.html" >BoderUserComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/BottomPopupComponent.html" >BottomPopupComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/BottomPopupInteractiveComponent.html" >BottomPopupInteractiveComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/FavoriteMessageComponent.html" >FavoriteMessageComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/HomeComponent.html" >HomeComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ItineraryComponent.html" >ItineraryComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoginComponent.html" >LoginComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MapComponent.html" >MapComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MessageComponent.html" >MessageComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MessageStandardComponent.html" >MessageStandardComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/NavbarComponent.html" >NavbarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ParkingComponent.html" >ParkingComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ParkingsComponent.html" >ParkingsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PopupErrorMessageComponent.html" >PopupErrorMessageComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ProfilComponent.html" >ProfilComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/RegisterComponent.html" >RegisterComponent</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#classes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/GpsNavSimu.html" >GpsNavSimu</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/ParkingClass.html" >ParkingClass</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#injectables-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="../injectables/AuthGuard.html" >AuthGuard</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/AuthInterceptor.html" >AuthInterceptor</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/AuthService.html" >AuthService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/EmissionService.html" >EmissionService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/EnergyService.html" >EnergyService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/GainService.html" >GainService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ItineraryDisplayService.html" >ItineraryDisplayService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ItineraryService.html" >ItineraryService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/MapService.html"  class="active" >MapService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ParkingDisplayService.html" >ParkingDisplayService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ParkingService.html" >ParkingService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/TokenStorageService.html" >TokenStorageService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/UserService.html" >UserService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/VehicleService.html" >VehicleService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ZoneService.html" >ZoneService</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#interfaces-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="../interfaces/Energy.html" >Energy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/NavGps.html" >NavGps</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Parking.html" >Parking</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/User.html" >User</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Vehicle.html" >Vehicle</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Zone.html" >Zone</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                               <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content injectable">
                   <div class="content-data">




<ol class="breadcrumb">
  <li>Injectables</li>
  <li>MapService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
    <li class="active">
        <a href="#infos" id="infos-tab" role="tab" data-toggle="tab">Infos</a>
    </li>
    <li>
        <a href="#source" role="tab" id="source-tab" data-toggle="tab">Source</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="infos">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/shared/services/map.service.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Map service for all map actions<br>Set &#39;leaflet-map&#39; and &#39;leaflet-routing-machine&#39;</p>

            </p>

            <section>
                <h3 id="constructor">Constructor</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <code>constructor(parkingDisplayService: <a href="../injectables/ParkingDisplayService.html" >ParkingDisplayService</a>, parkingService: <a href="../injectables/ParkingService.html" >ParkingService</a>)</code>
                                </td>
                            </tr>
            
                        </tbody>
                    </table>
            </section>

            <section>
                <h3 id="methods">Methods</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> receiveMap</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>receiveMap(map: Map)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> receiveZoom</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>receiveZoom(zoom: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setMapOptions</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setMapOptions()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Set general option for &#39;leaflet&#39; map</p>
            </div>
                                        <div class="io-description">
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>MapOptions</code>
            
                                        </div>
                                            <div class="io-description">
                                                <p>&#39;leaflet&#39; L.MapOption</p>
            
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> setRouting</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>setRouting(navGPS: NavGps)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Initiate Routing (itinerary) service/module<br>With local and distant GPS points<br>(To convert address into GPS point, use &#39;leaflet geocoder&#39;)</p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>navGPS</b>
                                                            </div>
                                                            <div>
                                                                <p>NavGps - set local LatLon &amp; dist LatLon</p>
            
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> syncGPSUserLoc</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>syncGPSUserLoc(navGPS: NavGps)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>Sync user location on nav itinerary (leaflet-routing-machine)</p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>navGPS</b>
                                                            </div>
                                                            <div>
                                                                <p>NavGps - actualised GPS info of user</p>
            
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> MapReady</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>MapReady(map: Map, navNeed: boolean, navGPS: NavGps)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>&#39;Leaflet&#39; method that runs when the map is ready</p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>map</b>
                                                            </div>
                                                            <div>
                                                                <p>L.Map</p>
            
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> locateUSerOnMap</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>locateUSerOnMap()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>recupère la geolocalisation de l&#39;utilisateur et ajoute un marqueur sur la map</p>
            </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> addUserMarker</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>addUserMarker(location: any, radius: any)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>ajoute un marker et un cercle  sur la carte representant l&#39;utilisateur geolocalisé</p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>location</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>radius</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> removeUserMarker</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>removeUserMarker()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>suppression du marker représentant le user</p>
            </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> startNavigation</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>startNavigation(parking: Parking)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>methode appelée afin de lancer la navigation vers un parking</p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>parking</b>
                                                            </div>
                                                            <div>
                                                                
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> stopNavigation</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>stopNavigation()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>méthode permmetant d&#39;arrêter la navigation</p>
            </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> initParkingWiew</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>initParkingWiew()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>affiche  tous les parkings sur la carte</p>
            </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> updateParkingList</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>updateParkingList()</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>fonction mettant à jour la liste des parkings a intervalle régulier</p>
            </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> onMapZoomEnd</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>onMapZoomEnd(e: ZoomAnimEvent)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>&#39;Leaflet&#39; method managing the zoom of the map</p>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>e</b>
                                                            </div>
                                                            <div>
                                                                <p>ZoomAnimEvent</p>
            
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> routingModule</b>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
            <code>routingModule(localLat: number, localLon: number, distLat: number, distLon: number)</code>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="col-md-4">
                                        <div class="io-description"><p>&#39;leaflet routing machine&#39; nav<br>to see more options and stages please consult documentation:</p>
            <ul>
            <li><a href="http://www.liedman.net/leaflet-routing-machine/#getting-started">http://www.liedman.net/leaflet-routing-machine/#getting-started</a> (official site)</li>
            <li><a href="http://www.liedman.net/leaflet-routing-machine/tutorials/">http://www.liedman.net/leaflet-routing-machine/tutorials/</a> (tutorials - official)</li>
            <li><a href="http://www.liedman.net/leaflet-routing-machine/api/">http://www.liedman.net/leaflet-routing-machine/api/</a> (API-Doc)</li>
            <li><a href="https://github.com/perliedman/leaflet-routing-machine#readme">https://github.com/perliedman/leaflet-routing-machine#readme</a> (gitHub)</li>
            </ul>
            </div>
                                        <div class="io-description">
                                                <b>Parameters :</b>
                                                <ul class="jsdoc-params">
                                                        <li>
                                                            <div>
                                                                <b>localLat</b>
                                                            </div>
                                                            <div>
                                                                <p>(start lat) - user gps located latitude</p>
            
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>localLon</b>
                                                            </div>
                                                            <div>
                                                                <p>(start lon) - user gps located longitude</p>
            
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>distLat</b>
                                                            </div>
                                                            <div>
                                                                <p>(end lat) - distant itinary latitude location</p>
            
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <b>distLon</b>
                                                            </div>
                                                            <div>
                                                                <p>(end lon) - distant itinary longitude location</p>
            
                                                            </div>
                                                        </li>
                                                </ul>
                                        </div>
                                        <div class="io-description">
                                            <b>Returns: </b>    <code>void</code>
            
                                        </div>
                                            <div class="io-description">
                                                
                                            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>

            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> L</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>L:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> map</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-circle"></span><code>map:     <code>boolean</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> Map</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>Map:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> MapOptions</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>MapOptions:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> myGoalIcon</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-circle"></span><code>myGoalIcon:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> myUserIcon</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-circle"></span><code>myUserIcon:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>Set custom Spark icons for Map Markers</p>
            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> myViaIcon</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-circle"></span><code>myViaIcon:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> navGPS</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-circle"></span><code>navGPS:     <code>boolean</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> NavGps</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>NavGps:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> NavGps</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>NavGps:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> NavGps</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>NavGps:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> needNav</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-circle"></span><code>needNav:     <code>boolean</code>
            </bcode>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value: </i><code>false</code>
                                    </td>
                                </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> number</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>number:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> obs$</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>obs$:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>observable notifiant ses abbonnés à intervalle régulier</p>
            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> options</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-circle"></span><code>options:     <code>boolean</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> parkings</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>parkings:     <code>Parking[]</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> routeControl</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-circle"></span><code>routeControl:     <code>Control</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Private</span> routingMachineIsRunning</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-lock"></span><code>routingMachineIsRunning:     <code>boolean</code>
            </bcode>
                                </td>
                            </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <i>Default value: </i><code>false</code>
                                    </td>
                                </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> selectedParking</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>selectedParking:     <code>Parking</code>
            </bcode>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>parking selectionné lorsque l&#39;on clique sur la carte</p>
            <p>selectedParking:Parking|undefined;</p>
            <p>/**<br>observable notifiant ses abbonnés à intervalle régulier</p>
            </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> sub</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>sub:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> syncActualLoc</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-circle"></span><code>syncActualLoc:     <code>boolean</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> syncNavGPS</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-circle"></span><code>syncNavGPS:     <code>boolean</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b> userMarkerLayer</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <code>userMarkerLayer:     <code>any</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td class="col-md-4">
                                    <b><span class="modifier">Public</span> zoom</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="col-md-4">
                                    <span class="modifier-icon fa fa-circle"></span><code>zoom:     <code>boolean</code>
            </bcode>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>
    </div>
    <div class="tab-pane fade tab-source-code" id="source">
        <pre><code class="hljs javascript">import { EventEmitter, Injectable, Output } from &#x27;@angular/core&#x27;;
import * as L from &#x27;leaflet&#x27;;
import { latLng, LayerGroup, Map, tileLayer } from &#x27;leaflet&#x27;;
import &#x27;leaflet-routing-machine&#x27;;
import { interval, Subscription } from &#x27;rxjs&#x27;;
import { NavGps } from &#x27;../models/nav-gps&#x27;;
import { Parking } from &#x27;../models/parking&#x27;;
import { ParkingDisplayService } from &#x27;./parking-display.service&#x27;;
import { ParkingService } from &#x27;./parking.service&#x27;;


/**
 * constante representant un interval de 1 minute exprimé en ms
 */
 const UPDATE_PARKING_INTERVAL &#x3D; 5000;
 const SEARCH_RADIUS &#x3D; 50;

/**
 * Map service for all map actions
 * Set &#x27;leaflet-map&#x27; and &#x27;leaflet-routing-machine&#x27;
 */
@Injectable({
  providedIn: &#x27;root&#x27;,
})
export class MapService {
  public navGPS!: NavGps;
  public syncNavGPS!: NavGps;
  public map!: Map;
  public zoom!: number;
  public options!: L.MapOptions;
  private routingMachineIsRunning &#x3D; false;
  public routeControl?: L.Routing.Control;
  public needNav&#x3D; false;
  public syncActualLoc!: NavGps;

  /**
   * Set custom Spark icons for Map Markers
   */
  public myUserIcon &#x3D; L.icon({
    iconUrl: &#x27;./assets/ico/map/spark_routing_user-marker.svg&#x27;,
    iconSize: [35, 35],
    iconAnchor: [5, 18],
    popupAnchor: [-3, -76],
  });
  public myGoalIcon &#x3D; L.icon({
    iconUrl: &#x27;./assets/ico/map/spark_routing_goal-marker.svg&#x27;,
    iconSize: [35, 35],
    iconAnchor: [5, 18],
    popupAnchor: [-3, -76],
  })
  public myViaIcon &#x3D; L.icon({
    iconUrl: &#x27;./assets.ico.map/spark_routing_via-marker.svg&#x27;,
    iconSize: [38, 95],
    iconAnchor: [22, 94],
    popupAnchor: [-3, -76],
  }) // End of: custom Spark Markers --◊

  sub: Subscription | null &#x3D; null;
  parkings: Parking[] &#x3D; [];
  /**
   * parking selectionné lorsque l&#x27;on clique sur la carte

  selectedParking:Parking|undefined;

   /**
   * observable notifiant ses abbonnés à intervalle régulier

   */
  selectedParking: Parking | undefined;
  /**
  * observable notifiant ses abbonnés à intervalle régulier
  */
  obs$ &#x3D; interval(UPDATE_PARKING_INTERVAL);
  userMarkerLayer?: L.LayerGroup;

  receiveMap(map: Map) {
    this.map &#x3D; map;
  }
  receiveZoom(zoom: number) {
    this.zoom &#x3D; zoom;
  }
  @Output() map$: EventEmitter&lt;L.Map&gt; &#x3D; new EventEmitter();
  @Output() zoom$: EventEmitter&lt;number&gt; &#x3D; new EventEmitter();

   /**
   * Set general option for &#x27;leaflet&#x27; map
   * @returns &#x27;leaflet&#x27; L.MapOption
   */
   setMapOptions(): L.MapOptions {
    this.options &#x3D; {
      layers:[tileLayer(&#x27;https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png&#x27;, {
        opacity: 0.7,
        maxZoom: 21,
        detectRetina: true,
        attribution: &#x27;&amp;copy; &lt;a href&#x3D;&quot;https://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; contributors&#x27;
      })],
      zoom:1,
      center:latLng(43.61424,3.87117, 14),
    };
    return this.options;
  } // End of: setMapOption --◊

  constructor(
    private parkingDisplayService: ParkingDisplayService,
    private parkingService: ParkingService
    )
    {

  }

  /**
   * Initiate Routing (itinerary) service/module
   * With local and distant GPS points
   * (To convert address into GPS point, use &#x27;leaflet geocoder&#x27;)
   * @param navGPS NavGps - set local LatLon &amp; dist LatLon
   */
  setRouting(navGPS: NavGps) {
    this.routingModule(navGPS.localLat, navGPS.localLon, navGPS.distLat, navGPS.distLon);
    setInterval(() &#x3D;&gt; this.syncGPSUserLoc(this.syncNavGPS), 500);
    this.parkingService.setNavGPS(this.syncNavGPS);
  }
  /**
   * Sync user location on nav itinerary (leaflet-routing-machine)
   * @param navGPS NavGps - actualised GPS info of user
   */
  syncGPSUserLoc(navGPS: NavGps) {
    var newLatLngA &#x3D; new L.LatLng(navGPS.localLat, navGPS.localLon);
    var newLatLngB &#x3D; new L.LatLng(navGPS.distLat, navGPS.distLon);
    this.routeControl!.setWaypoints([newLatLngA, newLatLngB]);
    this.map.panTo(newLatLngA);
  }

  /**
   * &#x27;Leaflet&#x27; method that runs when the map is ready
   * @param map L.Map
   */
  MapReady(map: L.Map, navNeed?: boolean, navGPS?: NavGps) {
    this.parkingDisplayService.map &#x3D; map;
    this.sub &#x3D; this.parkingService.parkingsAround$.subscribe((parkings) &#x3D;&gt; {
      this.parkings &#x3D; parkings;
      this.initParkingWiew();
    });
    this.updateParkingList();
    this.parkingDisplayService.selectedParking$.subscribe((parking) &#x3D;&gt; {
    this.selectedParking &#x3D; parking;
    });
    this.map &#x3D; map;
    this.map$.emit(map);
    // Set map center on start
    map.setView([43.61424, 3.87117], 16); // Set variables for init map - Update with variables of user loc ?
    map.setView([43.61424, 3.87117], 16).on(&quot;click&quot;,()&#x3D;&gt;{
      if(this.routingMachineIsRunning)
      {
        this.stopNavigation();
      }
    }); // Set variables for init map
    this.zoom &#x3D; map.getZoom();
    //suppression du prefix leaflet
    map.attributionControl.setPrefix(&#x27;&#x27;);
    //suppression de l&#x27;attribution en bas de page @OpenStreetMap
    this.locateUSerOnMap()
    map.attributionControl.remove();
    this.zoom$.emit(this.zoom);
    // routing-machine launcher
    if (this.needNav) {
      console.log(&#x27;needNavc is :&#x27; + this.needNav);
      this.setRouting(this.navGPS);
    }
  } // End of routing machine launcher --◊


  /**
   * recupère la geolocalisation de l&#x27;utilisateur et ajoute un marqueur sur la map
   */
 locateUSerOnMap(){
  this.map.on(&#x27;locationfound&#x27;, (e)&#x3D;&gt;{
    console.log(&quot;locationFound&quot;);
    // alert(&quot;map.locate&quot;);
     var radius &#x3D; 10;
     var location &#x3D; e.latlng;
     this.addUserMarker(location,radius);
     this.syncNavGPS.localLat&#x3D;e.latlng.lat;
     this.syncNavGPS.localLon&#x3D;e.latlng.lng;
     this.map.setView( e.latlng);
   });
   this.map.locate();
 }
  /**
   * ajoute un marker et un cercle  sur la carte representant l&#x27;utilisateur geolocalisé
   * @param location
   * @param radius
   */
 addUserMarker(location,radius){
  this.removeUserMarker();
  this.userMarkerLayer&#x3D;new LayerGroup();
  L.marker(location).addTo(this.userMarkerLayer);
  L.circle(location, radius).addTo(this.userMarkerLayer);
  this.userMarkerLayer.addTo(this.map);
 }
 /** suppression du marker représentant le user
  */
 removeUserMarker(){
   if(this.userMarkerLayer){
     this.map.removeLayer(this.userMarkerLayer);
     this.userMarkerLayer&#x3D;undefined;
   }

 }

  /**
   * methode appelée afin de lancer la navigation vers un parking
   * @param parking
   */
  startNavigation(parking:Parking){
    this.stopNavigation();
    console.log(&quot;start navigation&quot;);
    this.map.locate();
    this.navGPS.distLat&#x3D;parking.Ylat;
    this.navGPS.distLon&#x3D;parking.Xlong;
   if(!this.routingMachineIsRunning) this.setRouting(this.navGPS);

  }
  /**
   * méthode permmetant d&#x27;arrêter la navigation
   */
  stopNavigation(){
    if(this.routeControl&amp;&amp;this.routingMachineIsRunning){
      this.routeControl.spliceWaypoints(0,2);
      this.map.removeControl(this.routeControl);
      this.routingMachineIsRunning&#x3D;false;
      this.needNav&#x3D;false;
      this.routeControl&#x3D;undefined;

    }
  }

  /**
   * affiche  tous les parkings sur la carte
   */
   initParkingWiew(){
    console.log(&quot;init Parking view&quot;);
    this.parkingDisplayService.removeParkingsFromMap();
    this.parkings.forEach(parking &#x3D;&gt; {
      this.parkingDisplayService.addParkingOnMap(parking);
    });
  }

  /**
   * fonction mettant à jour la liste des parkings a intervalle régulier
   */
  updateParkingList() {
    this.obs$.subscribe((v) &#x3D;&gt; {
      console.log(&quot;update Parking&quot;);
      console.log(&quot;nav GPS:&quot; + this.syncNavGPS);
      console.log(v);
      if (this.syncNavGPS) {
        this.parkingService.getParkingListAround(this.syncNavGPS.localLat, this.syncNavGPS.localLon, SEARCH_RADIUS);
      }
    });
  }

  /**
   * &#x27;Leaflet&#x27; method managing the zoom of the map
   * @param e ZoomAnimEvent
   */
  onMapZoomEnd(e: L.ZoomAnimEvent) {
    this.zoom &#x3D; e.target.getZoom();
    this.zoom$.emit(this.zoom);
  }

  /**
  * &#x27;leaflet routing machine&#x27; nav
  * to see more options and stages please consult documentation:
  * - http://www.liedman.net/leaflet-routing-machine/#getting-started (official site)
  * - http://www.liedman.net/leaflet-routing-machine/tutorials/ (tutorials - official)
  * - http://www.liedman.net/leaflet-routing-machine/api/ (API-Doc)
  * - https://github.com/perliedman/leaflet-routing-machine#readme (gitHub)
  * @param localLat (start lat) - user gps located latitude
  * @param localLon (start lon) - user gps located longitude
  * @param distLat (end lat) - distant itinary latitude location
  * @param distLon (end lon) - distant itinary longitude location
  */
  routingModule(localLat: number, localLon: number, distLat: number, distLon: number): void {   // arguments &#x27;lat&#x27; &amp; &#x27;lon&#x27; &#x3D;&gt; possibilité de &#x27;latLong&#x27; [lat, lon]
    // Custom Spark icons for Map Markers
    const userMarker &#x3D; this.myUserIcon;
    const goalMarker &#x3D; this.myGoalIcon;
    const viaMarker &#x3D; this.myViaIcon;
    // Set/Update start (actual user) &amp; goal (distant) localisations
    let waypoints &#x3D; [
      L.latLng(localLat, localLon),
      L.latLng(distLat, distLon),
    ];

    if (!this.routingMachineIsRunning) {
      this.routingMachineIsRunning &#x3D; true;
    }
    // Leaflet-routing-machine conf &amp; run
    this.routeControl &#x3D; L.Routing.control({
        waypoints: [
          L.latLng(localLat, localLon),
          L.latLng(distLat, distLon),
        ],
        plan: L.Routing.plan(waypoints, {
          createMarker: function(i, wp, n) {
            if (i &#x3D;&#x3D; 0) {
              return L.marker(wp.latLng, {
                icon: userMarker
              });
            } else if (i &#x3D;&#x3D; n -1) {
              return L.marker(wp.latLng, {
                icon: goalMarker
              });
            } else {
              return L.marker(wp.latLng, {
                icon: viaMarker
              });
            }
          },
          routeWhileDragging: true
        }),
        lineOptions: {
          styles: [
            { color: &#x27;green&#x27;, opacity: 1, weight: 5 },
          ],
          extendToWaypoints: true,
          missingRouteTolerance: 1,
        },
        show: true,
        addWaypoints: false,
        showAlternatives: false,
        containerClassName: &#x27;contClass&#x27;,
        alternativeClassName: &#x27;altNav&#x27;,
      }).addTo(this.map).on(&#x27;routingerror&#x27;, () &#x3D;&gt; {
        try {
          this.map.getCenter();
        } catch (e) {
          this.map.fitBounds(L.latLngBounds(waypoints));
        }
      });

      L.Routing.errorControl(this.routeControl, {
        header: &quot;Erreur de calcul d&#x27;itinéraire&quot;,
        formatMessage(error) {
            if (error.status &lt; 0) {
                return &#x27;Le calcul du trajet à causé une erreur. Pour plus de détails :  &lt;code&gt;&lt;pre&gt;&#x27; +
                    error.message + &#x27;&lt;/pre&gt;&lt;/code&#x27;;
            } else {
                return &#x27;Le trajet ne peut pas être calculé. &#x27; +
                    error.message;
            }
        }
    }).addTo(this.map);
  }
}

</code></pre>
    </div>
</div>







                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/menu.js"></script>
       <script src="../js/libs/highlight.pack.js"></script>
       <script src="../js/libs/highlightjs-line-numbers.min.js"></script>
       <script src="../js/search/search_index.js"></script>
       <script>
            document.addEventListener('DOMContentLoaded', function() {
                hljs.initHighlightingOnLoad();
                hljs.initLineNumbersOnLoad();
            });
       </script>

    </body>
</html>
